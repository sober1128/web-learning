# CSRF跨站请求伪造
`CSRF`是一种挟持用户在当前已登录的`web`应用程序上执行非本意的操作的攻击方法。跟跨网站脚本`XSS`相比，`XSS`利用的是用户对指定网站的信任，而`CSRF`利用的是网站对浏览器的信任，浏览器对于同一`domain`下所有请求会自动携带`cookie`。

## 原理
1. 用户`C`浏览并登录信任网站`A`,产生`cookie`
2. 用户`C`未退出网站`A`，在同一个浏览器危险访问网站`B`
3. 网站`B`的页面存有一些攻击性的代码，会发出访问`A`的请求
4. 浏览器收到请求后，在用户不知情的情况下携带`cookie`访问网站`A`
5. `A`不知道请求是谁发的，浏览器会带上用户的`cookie`，所以`A`会根据用户的权限处理`B`发出的请求。这样就达到了攻击的目的。

## 防御
* 验证码：对敏感操作加入验证码，强制用户与网站进行交互
* 避免使用`GET`，降低攻击风险
* 检查`HTTP`中的`referer`字段，该字段记录了`HTTP`请求的来源地址
* 在请求头中加入`token`验证字段，浏览器并不会自动携带`Token`去请求，且`Token`可以携带一段加密的`jwt`用作身份认证，这样进行`CSRF`的时候仅传递了`cookie`，并不能表明用户身份，网站即拒绝攻击请求。
* 在`http`中自定义属性并验证。


